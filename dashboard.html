<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Market Skill Trends</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <nav>
        <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="dashboard.html">Dashboard</a></li>
        </ul>
    </nav>
    <header>
        <h1>Dashboard</h1>
        <p>Here you can view and analyze the latest market skill trends.</p>
    </header>

    <div class='tableauPlaceholder' id='viz1722232357154' style='position: relative'>
        <noscript>
            <a href='#'><img alt='Dashboard 1 ' src='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Sk&#47;SkillsDashboard1_17222323397040&#47;Dashboard1&#47;1_rss.png' style='border: none' /></a>
        </noscript>
        <object class='tableauViz' style='display:none;'>
            <param name='host_url' value='https%3A%2F%2Fpublic.tableau.com%2F' />
            <param name='embed_code_version' value='3' />
            <param name='site_root' value='' />
            <param name='name' value='SkillsDashboard1_17222323397040&#47;Dashboard1' />
            <param name='tabs' value='no' />
            <param name='toolbar' value='yes' />
            <param name='static_image' value='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Sk&#47;SkillsDashboard1_17222323397040&#47;Dashboard1&#47;1.png' />
            <param name='animate_transition' value='yes' />
            <param name='display_static_image' value='yes' />
            <param name='display_spinner' value='yes' />
            <param name='display_overlay' value='yes' />
            <param name='display_count' value='yes' />
            <param name='language' value='en-US' />
            <param name='filter' value='publish=yes' />
        </object>
    </div>

    <script type='text/javascript'>
        var divElement = document.getElementById('viz1722232357154');
        var vizElement = divElement.getElementsByTagName('object')[0];
        if (divElement.offsetWidth > 800) {
            vizElement.style.minWidth = '1400px';
            vizElement.style.maxWidth = '2300px';
            vizElement.style.width = '100%';
            vizElement.style.minHeight = '287px';
            vizElement.style.maxHeight = '987px';
            vizElement.style.height = (divElement.offsetWidth * 0.75) + 'px';
        } else if (divElement.offsetWidth > 500) {
            vizElement.style.minWidth = '1400px';
            vizElement.style.maxWidth = '2300px';
            vizElement.style.width = '100%';
            vizElement.style.minHeight = '287px';
            vizElement.style.maxHeight = '987px';
            vizElement.style.height = (divElement.offsetWidth * 0.75) + 'px';
        } else {
            vizElement.style.width = '100%';
            vizElement.style.height = '1977px';
        }
        var scriptElement = document.createElement('script');
        scriptElement.src = 'https://public.tableau.com/javascripts/api/viz_v1.js';
        vizElement.parentNode.insertBefore(scriptElement, vizElement);

        scriptElement.onload = function() {
            var viz = new tableau.Viz(vizElement, 'https://public.tableau.com/views/SkillsDashboard1_17222323397040/Dashboard1', {
                width: '100%',
                height: '800px',
                hideTabs: true,
                hideToolbar: false,
                onFirstInteractive: function() {
                    var workbook = viz.getWorkbook();
                    var activeSheet = workbook.getActiveSheet();

                    // Function to handle double-click events
                    function handleDoubleClick(event) {
                        event.getMarksAsync().then(function(marks) {
                            if (marks.length > 0) {
                                var selectedSkill = marks[0].getPairs().find(pair => pair.fieldName === 'Skill').formattedValue;
                                window.location.href = `job_postings.html?skill=${encodeURIComponent(selectedSkill)}`;
                            }
                        });
                    }

                    // Add event listener for double-click events
                    activeSheet.addEventListener(tableau.TableauEventName.MARKS_SELECTION, function(event) {
                        if (event.getEventName() === tableau.TableauEventName.MARKS_SELECTION) {
                            handleDoubleClick(event);
                        }
                    });
                }
            });
        };
    </script>

    <!-- Botpress Webchat Embed Code -->
    <script src="https://cdn.botpress.cloud/webchat/v1/inject.js"></script>
    <script src="https://mediafiles.botpress.cloud/c9244666-66d6-49d3-8861-955759376134/webchat/config.js" defer></script>
    <!-- End of Botpress Webchat Embed Code -->
</body>
</html>
